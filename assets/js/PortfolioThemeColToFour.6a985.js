(window["db5216A"]=window["db5216A"]||[]).push([["PortfolioThemeColToFour"],{"0949":function(t,e,i){var n,r;(function(o,s){n=s,r="function"===typeof n?n.call(e,i,e,t):n,void 0===r||(t.exports=r)})("undefined"!=typeof window&&window,(function(){"use strict";function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||{};return n[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],r=0;r<i.length;r++){var o=i[r],s=n&&n[o];s&&(this.off(t,o),delete n[o]),o.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}))},"0d04":function(t,e,i){},"170d":function(t,e,i){"use strict";i("b0c0"),i("ac1f"),i("466d");var n=i("5397"),r=i("8ce5"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"overflow-hidden",class:[t.styles.popup,"preview-file"]},[i("div",{staticClass:"preview-file-backdrop",class:t.styles.popupBackdrop}),i("div",{staticClass:"preview-file-header w-100 align-items-stretch position-absolute"},[i("div",{staticClass:"preview-file-header-name text-white pl-4 t4 text-truncate",domProps:{textContent:t._s(t.fileName)}}),i("div",{staticClass:"preview-file-header-controls flex-shrink-0"},[i("span",{staticClass:"text-white t4 pr-2 d-inline-block",domProps:{textContent:t._s(t.pageText)}}),i("a",{attrs:{href:t.fileUrl,target:"_blank"}},[i("i",{staticClass:"jb_icon_go_top text-white t4"})]),i("a",{attrs:{"data-e2e":"portfolio-preview__close"},on:{click:function(e){return e.preventDefault(),t.onClose(e)}}},[i("i",{staticClass:"jb_icon_delete text-white t4"})])])]),i("div",{ref:"preview-wrapper",staticClass:"preview-file-wrapper bg-transparent position-relative w-100 h-100 align-items-center justify-content-center"},[i("transition",{attrs:{name:"animate-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isImgLoading,expression:"!isImgLoading"}],key:t.previewFileStyle.backgroundImage,ref:"preview-file",style:t.previewFileStyle})])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isArrowLeftShow,expression:"isArrowLeftShow"}],staticClass:"preview-file-arrow-left position-fixed text-center align-items-center justify-content-center",attrs:{"data-e2e":"portfolio-preview__prev"},on:{click:function(e){t.index-=1}}},[i("i",{staticClass:"jb_icon_left"})]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isArrowRightShow,expression:"isArrowRightShow"}],staticClass:"preview-file-arrow-right position-fixed text-center align-items-center justify-content-center",attrs:{"data-e2e":"portfolio-preview__next"},on:{click:function(e){t.index+=1}}},[i("i",{staticClass:"jb_icon_right"})]),!t.isLoadingPluginUsed&&t.isImgLoading?i("div",{staticClass:"preview-file-loading position-fixed w-100 h-100 align-items-center justify-content-center"},[i("Loading")],1):t._e()])},s=[],a=(i("99af"),i("4160"),i("d81d"),i("d3b7"),i("a19e")),c=i.n(a),h=i("50eb"),u=i("bd7e"),d=i.n(u),f=null,l={name:"Preview",components:{Loading:h["a"]},props:{pageName:n["a"].string.def(""),fileName:n["a"].string.def(""),fileUrl:n["a"].string.def(""),fileId:n["a"].string.def(""),action:n["a"].func.isRequired.def((function(){}))},data:function(){return{styles:c.a,isLoadingPluginUsed:!1,isImgLoading:!1,urlList:[],wrapper:{width:0,height:0},file:{width:0,height:0},index:0}},computed:{isImage:function(){return!!this.fileName.match(/(jpg|jpeg|png)/g)},isArrowLeftShow:function(){return this.urlList.length>1&&0!=this.index},isArrowRightShow:function(){return this.urlList.length>1&&this.index<this.urlList.length-1},currentUrl:function(){return this.urlList[this.index]?this.urlList[this.index].url:""},pageText:function(){return this.urlList.length>1?"".concat(this.index+1,"／").concat(this.urlList.length):""},previewFileStyle:function(){var t="";return t=this.isImage&&(this.file.width<this.wrapper.width||this.file.height<this.wrapper.height)?"auto":"contain",{backgroundImage:"url(".concat(this.currentUrl,")"),backgroundSize:t}}},watch:{currentUrl:function(t){var e=this;this.openLoading(),this.$nextTick((function(){e.wrapper={width:e.$refs["preview-wrapper"].offsetWidth,height:e.$refs["preview-wrapper"].offsetWidth},d()(e.$refs["preview-file"],{background:!0},(function(t){e.file={width:t.images[0].img.naturalWidth,height:t.images[0].img.naturalHeight},e.closeLoading()}))}))}},mounted:function(){this.isLoadingPluginUsed=!!this.$CLoading,this.isImage?this.urlList=[{url:this.fileUrl}]:this.intervalRequest(this.action)},beforeDestroy:function(){clearTimeout(f),this.closeLoading()},methods:{intervalRequest:function(t){var e=this;return this.openLoading(),new Promise((function(i){t({fileId:e.fileId}).then((function(n){"success"===n.data.data.convertStatus?(e.urlList=n.data.data.urls.map((function(t){return{url:t}})),i(n.data.data.urls),clearTimeout(f)):f=setTimeout(e.intervalRequest(t),3e3)})).catch((function(t){clearTimeout(f),e.closeLoading(),e.onClose(),window.open(e.fileUrl)}))}))},onClose:function(){this.$emit("on-preview-close")},openLoading:function(){this.isImgLoading=!0,this.isLoadingPluginUsed&&([{key:"zIndex",value:"10000"},{key:"pointerEvents",value:"none"}].forEach((function(t){document.querySelector(".loading-mask").style[t.key]=t.value})),this.$CLoading.show())},closeLoading:function(){this.isImgLoading=!1,this.isLoadingPluginUsed&&([{key:"zIndex",value:""},{key:"pointerEvents",value:""}].forEach((function(t){document.querySelector(".loading-mask").style[t.key]=t.value})),this.$CLoading.hide())}}},m=l,p=(i("29f3"),i("2877")),g=Object(p["a"])(m,o,s,!1,null,"378461a1",null),v=g.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-portfolio-component-cover"},[i("video-and-image-view",{staticClass:"w-100 h-100",attrs:{type:t.type,url:t.src,"default-cover":t.defaultCover},on:{coverImageError:function(e){t.imageIsError=!0},coverLinkError:function(e){t.imageIsError=!0}}})],1)},y=[],L=(i("7db0"),i("5bb4")),b=i("f36d"),E=i("401c"),I=i("80f7"),C=["mp4","mov","webm"],k={name:"FormPortfolioComponentCover",components:{VideoAndImageView:L["default"]},props:{item:n["a"].object.def({}),defaultCover:n["a"].string.def("".concat(r["a"].VUE_APP_CDN_STATIC_URL,"images/cprofile/themeDefault/custom-classic-1.svg"))},data:function(){return{env:r["a"],imageIsError:!1,API_COVER_TYPE_VALUE:b["b"]}},computed:{attachTypeIsLink:function(){return this.item.attachType.value==E["a"].LINK},attachNameIsVideo:function(){var t=this;return C.find((function(e){return t.item.attach.name.toLowerCase().match(".".concat(e))}))},src:function(){if(this.imageIsError)return"";if(this.attachTypeIsLink)return this.item.attach.url;var t=this.item.attach.name.toLowerCase().match(".gif");return t||this.attachNameIsVideo?this.item.attach.url:this.item.attach.src||this.item.attach.url},currentType:function(){if(this.attachTypeIsLink){var t=Object(I["b"])(this.item.attach.url).source==I["a"].YOUTUBE,e=Object(I["b"])(this.item.attach.url).source==I["a"].VIMEO,i=Object(I["b"])(this.item.attach.url).source==I["a"].FACEBOOK;return t||e||i?b["b"].LINK:b["b"].NONE}return this.attachNameIsVideo?b["b"].VIDEO:b["b"].IMAGE},type:function(){return this.imageIsError?b["b"].NONE:this.currentType}},mounted:function(){},methods:{}},_=k,A=(i("efe1"),Object(p["a"])(_,w,y,!1,null,"1776169c",null)),x=A.exports,j=i("19de"),P=i.n(j);e["a"]={components:{Preview:v,FormPortfolioComponentCover:x},props:{item:n["a"].object.def({}),previewAction:n["a"].func.def(void 0),staACData:n["a"].object.def({}),actUploadLink:n["a"].func.def((function(){})),actGetAttach:n["a"].func.def((function(){}))},data:function(){return{isImgLoaded:!1,defaultAttachSrcUrl:"".concat(r["a"].VUE_APP_CDN_STATIC_URL,"images/cprofile/themeDefault/custom-classic-1.svg"),itemAttachSrc:"",isShow:!1,ATTACH_TYPES:E["a"]}},computed:{getItemAttachSrc:function(){return this.item.attach.src?this.item.attach.src:this.itemAttachSrc?this.itemAttachSrc:this.defaultAttachSrcUrl},needsPreview:function(){return!!this.previewAction},isRegisterPreview:function(){return this.needsPreview&&!!this.item.attach.name.match(/(docx|pptx|ppt|pdf|jpeg|jpg|png)$/)},attachUrlIsEmpty:function(){return""==this.item.attach.url},attachHref:function(){var t=!this.attachUrlIsEmpty&&!this.isRegisterPreview&&!this.item.attach.auth;return!!t&&this.item.attach.url}},mounted:function(){var t=this;this.item.attachType.value===E["a"].LINK&&this.item.attach.crawler&&this.actUploadLink(this.item.attach.url).then((function(e){t.itemAttachSrc=e.src})).catch((function(t){}))},methods:{itemAttachSrcError:function(){this.item.attach.src="",this.itemAttachSrc=""},onClick:function(){var t=this;this.attachUrlIsEmpty||(this.isRegisterPreview?this.isShow=!0:this.item.attach.auth&&this.actGetAttach(this.item.attach).then((function(e){e&&e.data&&P()(e.data,t.item.attach.name)})).catch((function(t){alert(t.response.data)})))}}}},"19de":function(t,e){t.exports=function(t,e,i,n){var r="undefined"!==typeof n?[n,t]:[t],o=new Blob(r,{type:i||"application/octet-stream"});if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(o,e);else{var s=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(o):window.webkitURL.createObjectURL(o),a=document.createElement("a");a.style.display="none",a.href=s,a.setAttribute("download",e),"undefined"===typeof a.download&&a.setAttribute("target","_blank"),document.body.appendChild(a),a.click(),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(s)}),200)}}},"29f3":function(t,e,i){"use strict";var n=i("fb41"),r=i.n(n);r.a},"7bc6":function(t,e,i){"use strict";var n=i("fba9"),r=i("8b76"),o=i("50cb"),s=i("f941"),a=i("13ea"),c=i.n(a),h=i("5397");e["a"]={name:n["c"].THEME_3_COLUMN,components:{FormElementHeader:o["default"],FormElementThemeContainer:s["default"],NoAuth:r["default"]},props:{gtm:h["a"].object.def({portfolio:""}),previewAction:h["a"].func.def(void 0),staName:h["a"].string.def("附件"),staViewData:h["a"].object.def({}),staACData:h["a"].object.def({}),getIsBrowserMode:h["a"].any.def((function(){return!1})),getReadMode:h["a"].any.def((function(){return!1})),actUploadLink:h["a"].func.def((function(){})),actGetAttach:h["a"].func.def((function(){}))},data:function(){return{}},computed:{portfolioList:function(){return this.staViewData.portfolios},portfolioGtm:function(){return this.gtm.portfolio?{"data-gtm-cprofile":this.gtm.portfolio}:{}}},mounted:function(){},methods:{isEmpty:c.a}}},bd7e:function(t,e,i){var n,r;
/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */(function(o,s){"use strict";n=[i("0949")],r=function(t){return s(o,t)}.apply(e,n),void 0===r||(t.exports=r)})("undefined"!==typeof window?window:this,(function(t,e){"use strict";var i=t.jQuery,n=t.console;function r(t,e){for(var i in e)t[i]=e[i];return t}var o=Array.prototype.slice;function s(t){if(Array.isArray(t))return t;var e="object"==typeof t&&"number"==typeof t.length;return e?o.call(t):[t]}function a(t,e,o){if(!(this instanceof a))return new a(t,e,o);var c=t;"string"==typeof t&&(c=document.querySelectorAll(t)),c?(this.elements=s(c),this.options=r({},this.options),"function"==typeof e?o=e:r(this.options,e),o&&this.on("always",o),this.getImages(),i&&(this.jqDeferred=new i.Deferred),setTimeout(this.check.bind(this))):n.error("Bad element for imagesLoaded "+(c||t))}a.prototype=Object.create(e.prototype),a.prototype.options={},a.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},a.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&c[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var r=i[n];this.addImage(r)}if("string"==typeof this.options.background){var o=t.querySelectorAll(this.options.background);for(n=0;n<o.length;n++){var s=o[n];this.addElementBackgroundImages(s)}}}};var c={1:!0,9:!0,11:!0};function h(t){this.img=t}function u(t,e){this.url=t,this.element=e,this.img=new Image}return a.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e){var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);while(null!==n){var r=n&&n[2];r&&this.addBackground(r,t),n=i.exec(e.backgroundImage)}}},a.prototype.addImage=function(t){var e=new h(t);this.images.push(e)},a.prototype.addBackground=function(t,e){var i=new u(t,e);this.images.push(i)},a.prototype.check=function(){var t=this;function e(e,i,n){setTimeout((function(){t.progress(e,i,n)}))}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach((function(t){t.once("progress",e),t.check()})):this.complete()},a.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&n&&n.log("progress: "+i,t,e)},a.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},h.prototype=Object.create(e.prototype),h.prototype.check=function(){var t=this.getIsImageComplete();t?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},h.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},h.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},h.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},h.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},h.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},h.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},u.prototype=Object.create(h.prototype),u.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var t=this.getIsImageComplete();t&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},u.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},u.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},a.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&(i=e,i.fn.imagesLoaded=function(t,e){var n=new a(this,t,e);return n.jqDeferred.promise(i(this))})},a.makeJQueryPlugin(),a}))},efe1:function(t,e,i){"use strict";var n=i("0d04"),r=i.n(n);r.a},fb41:function(t,e,i){}}]);